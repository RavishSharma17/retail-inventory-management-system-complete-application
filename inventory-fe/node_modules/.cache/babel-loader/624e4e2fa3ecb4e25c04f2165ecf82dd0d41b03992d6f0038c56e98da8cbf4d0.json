{"ast":null,"code":"var _jsxFileName = \"/home/blues/Documents/Retail inventory management complete application/inventory-fe/src/components/Checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearCart } from '../store/cartSlice';\nimport axios from 'axios';\nimport './Checkout.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Checkout() {\n  _s();\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const [user, setUser] = useState({\n    name: '',\n    email: ''\n  });\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUser(prevUser => ({\n      ...prevUser,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      // eslint-disable-next-line\n      const order = {\n        user,\n        items: cart\n      };\n\n      // As there is not session implementation, use a new user_id for each click.\n      const user_id = (Math.random() + 1).toString(36).substring(7);\n\n      // when checking out add all items to cart first then checkout.\n      console.log(order);\n      Promise.all(order.items.map(cartItem => {\n        return axios.post('http://localhost:3100/cart', {\n          \"user_id\": user_id,\n          \"product_id\": cartItem.id,\n          \"quantity\": cartItem.quantity\n        });\n      })).then(values => {\n        // checkout and populate the databse\n        return axios.post('http://localhost:3100/checkout', {\n          ...user,\n          \"user_id\": user_id\n        }).then(val => {\n          // clear cart db\n          return axios.delete(`http://localhost:3100/cart/clear?user_id=${user_id}`);\n        });\n      });\n      dispatch(clearCart());\n      alert('Order placed successfully!');\n    } catch (error) {\n      console.error('Error placing order:', error);\n      alert('Failed to place order.');\n    }\n  };\n  const handleClearCart = () => {\n    dispatch(clearCart());\n  };\n  const totalAmount = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: user.name,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            value: user.email,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: cart.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [item.name, \" - \\u20B9\", item.price, \" x \", item.quantity]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Total: \\u20B9\", totalAmount.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Place Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleClearCart,\n        children: \"Clear Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"nbCrD7nYEg3eF/NuYFq2GnPD2+M=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","clearCart","axios","jsxDEV","_jsxDEV","Checkout","_s","dispatch","cart","state","user","setUser","name","email","handleInputChange","e","value","target","prevUser","handleSubmit","preventDefault","order","items","user_id","Math","random","toString","substring","console","log","Promise","all","map","cartItem","post","id","quantity","then","values","val","delete","alert","error","handleClearCart","totalAmount","reduce","total","item","price","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","required","toFixed","onClick","_c","$RefreshReg$"],"sources":["/home/blues/Documents/Retail inventory management complete application/inventory-fe/src/components/Checkout.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearCart } from '../store/cartSlice';\nimport axios from 'axios';\nimport './Checkout.css';\n\nfunction Checkout() {\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const [user, setUser] = useState({ name: '', email: '' });\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setUser(prevUser => ({\n      ...prevUser,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n        // eslint-disable-next-line\n      const order = {\n        user,\n        items: cart\n      };\n\n      // As there is not session implementation, use a new user_id for each click.\n      const user_id = (Math.random() + 1).toString(36).substring(7);\n\n      // when checking out add all items to cart first then checkout.\n      console.log(order);\n        Promise.all(order.items.map(cartItem => {\n            return axios.post('http://localhost:3100/cart', {\n                \"user_id\": user_id,\n                \"product_id\": cartItem.id,\n                \"quantity\": cartItem.quantity\n                });\n        })).then((values) => {\n                // checkout and populate the databse\n                return axios.post('http://localhost:3100/checkout', {...user, \"user_id\": user_id})\n            .then((val) => {\n                // clear cart db\n                return axios.delete(`http://localhost:3100/cart/clear?user_id=${user_id}`);\n            });\n        });\n\n      dispatch(clearCart());\n      alert('Order placed successfully!');\n    } catch (error) {\n      console.error('Error placing order:', error);\n      alert('Failed to place order.');\n    }\n  };\n\n  const handleClearCart = () => {\n    dispatch(clearCart());\n  };\n\n  const totalAmount = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n\n  return (\n    <div>\n      <h1>Checkout</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>\n            Name:\n            <input type=\"text\" name=\"name\" value={user.name} onChange={handleInputChange} required />\n          </label>\n        </div>\n        <div>\n          <label>\n            Email:\n            <input type=\"email\" name=\"email\" value={user.email} onChange={handleInputChange} required />\n          </label>\n        </div>\n        <h2>Cart</h2>\n        <ul>\n          {cart.map(item => (\n            <li key={item.id}>\n              {item.name} - ₹{item.price} x {item.quantity}\n            </li>\n          ))}\n        </ul>\n        <h4>Total: ₹{totalAmount.toFixed(2)}</h4>\n        <button type=\"submit\">Place Order</button>\n        <button type=\"button\" onClick={handleClearCart}>Clear Cart</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Checkout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}